<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width"/><meta name="next-head-count" content="2"/><link rel="preload" href="/_next/static/css/2631d90927877cac.css" as="style"/><link rel="stylesheet" href="/_next/static/css/2631d90927877cac.css" data-n-g=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-5cd94c89d3acac5f.js"></script><script src="/_next/static/chunks/webpack-9b312e20a4e32339.js" defer=""></script><script src="/_next/static/chunks/framework-4556c45dd113b893.js" defer=""></script><script src="/_next/static/chunks/main-c092d128ebbfab93.js" defer=""></script><script src="/_next/static/chunks/pages/_app-8c46abc9957e8ec0.js" defer=""></script><script src="/_next/static/chunks/pages/%5Bslug%5D-387cb31354434809.js" defer=""></script><script src="/_next/static/2yOrpd8KCKtPdgy_pAFqA/_buildManifest.js" defer=""></script><script src="/_next/static/2yOrpd8KCKtPdgy_pAFqA/_ssgManifest.js" defer=""></script><script src="/_next/static/2yOrpd8KCKtPdgy_pAFqA/_middlewareManifest.js" defer=""></script><style data-styled="" data-styled-version="5.3.5">.iuzufA{font-family:'Inter',sans-serif;width:100%;height:100%;background-color:#080911;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;}/*!sc*/
@media (max-width:830px){.iuzufA{width:100%;margin:0;padding:0 30px;}}/*!sc*/
@media screen and (max-width:400px){.iuzufA{padding:15px;height:100%;}}/*!sc*/
data-styled.g1[id="sc-bczRLJ"]{content:"iuzufA,"}/*!sc*/
.dLrvAh{background-image:linear-gradient( -225deg,#231557 0%,#44107a 29%,#ff1361 100% );display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;width:100%;padding-top:4px;padding-bottom:4px;text-align:center;color:white;font-weight:bold;}/*!sc*/
.dLrvAh span{width:100%;font-size:13px;}/*!sc*/
data-styled.g2[id="sc-gsnTZi"]{content:"dLrvAh,"}/*!sc*/
.jJXgJI{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;width:100%;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;font-family:'Inter',sans-serif;font-size:18px;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;height:110px;max-width:800px;color:white;}/*!sc*/
.jJXgJI .menu{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;}/*!sc*/
.jJXgJI .menu a{margin-left:15px;}/*!sc*/
@media (max-width:830px){.jJXgJI{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;width:100%;margin:0;}.jJXgJI .logo{margin-right:0;}.jJXgJI .menu{margin-top:10px;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;font-size:15px;}.jJXgJI .menu a{margin-left:15px;}}/*!sc*/
data-styled.g3[id="sc-dkzDqf"]{content:"jJXgJI,"}/*!sc*/
.gGmpHf{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;bottom:0;left:0;height:130px;width:100%;color:white;}/*!sc*/
@media (min-width:1600px){}/*!sc*/
data-styled.g4[id="sc-hKMtZM"]{content:"gGmpHf,"}/*!sc*/
.gjhzje{overflow:hidden;height:100%;width:100%;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;font-size:16px;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;text-align:left;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;line-height:1.7;max-width:800px;padding:0 25px;font-family:"Inter";}/*!sc*/
.gjhzje article{width:100%;margin:0;}/*!sc*/
.gjhzje strong{font-size:14px;font-weight:normal;color:white;margin:0 2px;border-radius:0.2em;padding:1px 2px;background-color:#4c4c4c;}/*!sc*/
.gjhzje img{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex:1;-ms-flex:1;flex:1;border-radius:33px;margin:auto;max-width:400px;padding:30px;}/*!sc*/
.gjhzje .cabecera{width:100%;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;text-align:left;}/*!sc*/
.gjhzje .div3{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;}/*!sc*/
.gjhzje .tags{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;}/*!sc*/
.gjhzje .tag2{color:#444444;border-radius:5px;padding:1px 7px;font-size:12px;background-color:#C9FFDC;margin:0 7px;}/*!sc*/
.gjhzje .tag1{background-color:#900C3F;color:white;border-radius:5px;padding:2px 7px;font-size:12px;}/*!sc*/
.gjhzje h1{font-size:40px;color:#f3f3f3;}/*!sc*/
.gjhzje h2{margin:40px 0 0 0;color:#f3f3f3;}/*!sc*/
.gjhzje ul{color:#f3f3f3;}/*!sc*/
.gjhzje h3{font-size:24px;margin:25px 0 0 0;color:#f3f3f3;}/*!sc*/
.gjhzje p{color:#eaeaea;font-size:15px;font-weight:400;line-height:1.75;margin-bottom:20px;}/*!sc*/
@media (max-width:830px){.gjhzje{padding:0 0px;}.gjhzje article{width:100%;margin:0;}.gjhzje h1{font-size:20px;width:100%;}.gjhzje .cabecera{width:100%;}.gjhzje .tags{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;width:100%;}.gjhzje .tags span{font-size:11px;}.gjhzje .tag1{padding:1px 3px;margin:0;}.gjhzje .tag2{padding:1px 3px;margin:0 3px;}.gjhzje img{width:100%;}.gjhzje p{font-size:16px;}}/*!sc*/
data-styled.g5[id="sc-eCYdqJ"]{content:"gjhzje,"}/*!sc*/
</style></head><body><div id="__next"><div class="sc-bczRLJ iuzufA"><div class="sc-gsnTZi dLrvAh"><span>S칤gueme en Instagram y Twitter: @serdev_es</span></div><header id="layout-header" class="sc-dkzDqf jJXgJI"><a class="logo" style="display:flex;align-items:center" href="/"><span style="box-sizing:border-box;display:inline-block;overflow:hidden;width:160px;height:60px;background:none;opacity:1;border:0;margin:0;padding:0;position:relative"><img alt="serdev logo" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" decoding="async" data-nimg="fixed" style="position:absolute;top:0;left:0;bottom:0;right:0;box-sizing:border-box;padding:0;border:none;margin:auto;display:block;width:0;height:0;min-width:100%;max-width:100%;min-height:100%;max-height:100%"/><noscript><img alt="serdev logo" srcSet="assets/logo-png.png?imwidth=256 1x, assets/logo-png.png?imwidth=384 2x" src="assets/logo-png.png?imwidth=384" decoding="async" data-nimg="fixed" style="position:absolute;top:0;left:0;bottom:0;right:0;box-sizing:border-box;padding:0;border:none;margin:auto;display:block;width:0;height:0;min-width:100%;max-width:100%;min-height:100%;max-height:100%" loading="lazy"/></noscript></span></a><div class="menu"><a style="display:flex;align-items:center" href="/"><span>Inicio</span></a><a class="menu-item" style="display:flex;align-items:center" href="/proyectos"><span>Proyectos</span></a><a class="menu-item" style="display:flex;align-items:center" href="/about"><span>Sobre m칤</span></a></div></header><div class="sc-eCYdqJ gjhzje"><div class="cabecera"><h1>游낾 Diferencia entre Expose y Ports en Docker Compose</h1><div class="tags"><span class="tag1">游딉勇뀱ulio 10, 2022</span><span class="tag2">游눹Informatica</span></div></div><article><p><img src="https://avatars.githubusercontent.com/u/5429470?s=200&amp;v=4" alt="N|Solid"/></p>
<h2>Resumen</h2>
<p>Como sabemos, Docker Compose es una herramienta para definir y administrar m칰ltiples contenedores de una vez. Docker Compose establece una red dedicada para los contenedores que hemos definido, habilitando la comunicacion entre ellos.
Como resultado, nosotros podemos crear y correr servicios con una configuracion en el archivo docker-compose.yml usando simplemente un 칰nico comando.</p>
<p>En este art칤culo veremos dos propiedades de YAML que nos permitir치n customizar nuestra red de los contenedores, con <em>EXPOSE</em> y <em>PORTS</em>.</p>
<h2>Expose</h2>
<p>Primeramente, echemos un ojo a la configuracion de <em>expose</em>. Esta propiedad define los puertos que Docker Compose expone desde el contenedor.</p>
<p>Estos puertos ser치n accesibles desde otros servicios conectados a la misma red (<em>network</em>), pero no ser치n publicados en el ordenador o la m치quina que proporciona el host.</p>
<p>Podemos exponer el puerto especificando su n칰mero en la secci칩n de <em>services</em>.</p>
<pre class="language-shell"><code class="language-shell">services:
  myapp1:
    <span class="token punctuation">..</span>.
    expose:
      - <span class="token string">&quot;3000&quot;</span>
      - <span class="token string">&quot;8000&quot;</span>
  myapp2:
    <span class="token punctuation">..</span>.
    expose:
      - <span class="token string">&quot;5000&quot;</span>
</code></pre>
<p>Como podemos ver, podemos especificar m칰ltiples valores para cada servicio. En este caso, hemos expuesto los puertos 3000 y 8000 para el contendor <em>myapp1</em>  y para el contendor <em>myapp2</em> el puerto 5000. Los servicios ahora son accesibles desde estos puertos por otros contenedores en la misma red (<em>network</em>).
Echemos un ojo a los puertos expuestos.</p>
<pre class="language-js"><code class="language-js"><span class="token operator">&gt;</span> docker ps
<span class="token constant">CONTAINER</span> <span class="token constant">ID</span>   <span class="token constant">IMAGE</span>    <span class="token constant">COMMAND</span>     <span class="token constant">CREATED</span>     <span class="token constant">STATUS</span>      <span class="token constant">PORTS</span>               <span class="token constant">NAMES</span>
<span class="token number">8673</span>c14f18d1   <span class="token spread operator">...</span>      <span class="token spread operator">...</span>         <span class="token spread operator">...</span>         <span class="token spread operator">...</span>         <span class="token number">3000</span><span class="token operator">/</span>tcp<span class="token punctuation">,</span> <span class="token number">8000</span><span class="token operator">/</span>tcp  bael_myapp1
bc044e180131   <span class="token spread operator">...</span>      <span class="token spread operator">...</span>         <span class="token spread operator">...</span>         <span class="token spread operator">...</span>         <span class="token number">5000</span><span class="token operator">/</span>tcp            bael_myapp2
</code></pre>
<p>En la salida del comando <em>docker</em>.ps*, podemos encontrar los puertos que estan expuestos en la columna PORTS.
Finalmente, verifiquemos la comunicaci칩n entre los contenedores con el siguiente comando.</p>
<pre class="language-js"><code class="language-js"><span class="token operator">&gt;</span> docker exec <span class="token operator">-</span>it bc044e180131 <span class="token operator">/</span>bin<span class="token operator">/</span>bash

bash<span class="token operator">-</span><span class="token number">5.1</span>$ nc <span class="token operator">-</span>vz myapp1 <span class="token number">3000</span>
<span class="token function">myapp1</span> <span class="token punctuation">(</span><span class="token number">172.18</span><span class="token number">.0</span><span class="token number">.1</span><span class="token operator">:</span><span class="token number">3000</span><span class="token punctuation">)</span> open
bash<span class="token operator">-</span><span class="token number">5.1</span>$ nc <span class="token operator">-</span>vz myapp1 <span class="token number">8000</span>
<span class="token function">myapp1</span> <span class="token punctuation">(</span><span class="token number">172.18</span><span class="token number">.0</span><span class="token number">.1</span><span class="token operator">:</span><span class="token number">8000</span><span class="token punctuation">)</span> open
</code></pre>
<p>Acabamos de conectarnos a la CLI de <em>myapp2</em> usando el comando <em>netcat</em>, comprobamos que los dos puertos expuestos desde myapp1 estan comunicados.</p>
<h2>PORTS</h2>
<p>Ahora, echemos un ojo a PORTS. Como la propiedad de antes, esta propiedad define los puertos que queremos que esten expuestos desde el contenedor. A diferencia de la configuracion de EXPOSE, la configuracion de PORTS permite que estos puertos que especifiquemos sean accesibles internamente y publicados en la <em>maquina host</em> o el ordenador.</p>
<p>Como antes, podemos definir los puertos de cada servicio, pero la configuracion es un poco mas compleja. Primero, tenemos que elegir dos sintaxis, la corta o la larga, para definir la configuracion.</p>
<h3>Sintaxis Corta</h3>
<p>Empezemos analizando la corta, La corta esta separada por dos puntos para establecer la direcci칩n IP del HOST, el puerto del HOST y el puerto del contenedor.</p>
<p>Definamos los puertos en el archivo Docker Compose.</p>
<pre class="language-js"><code class="language-js"><span class="token punctuation">[</span><span class="token constant">HOST</span><span class="token operator">:</span><span class="token punctuation">]</span><span class="token constant">CONTENDOR</span><span class="token punctuation">[</span><span class="token operator">/</span><span class="token constant">PROTOCOL</span><span class="token punctuation">]</span>
</code></pre>
<ul>
<li>Aqu칤 el HOST es un n칰mero de puerto de host o un rango de n칰meros de puerto que puede ir precedido de una direcci칩n IP. Si no especificamos la direcci칩n IP, Docker Compose vincula el puerto a todas las interfaces de red</li>
<li>El CONTENEDOR define un n칰mero de puerto del contenedor o un rango de n칰meros de puerto.</li>
<li>El PROTOCOL restringe los puertos de los contenedores al protocolo especificado o los establece como TCP si est치n vac칤os. S칩lo la parte de CONTAINER es obligatoria.</li>
</ul>
<p>Ahora que conocemos la sintaxis, vamos a definir los puertos en nuestro archivo Docker Compose:</p>
<pre class="language-js"><code class="language-js">services<span class="token operator">:</span>
  myapp1<span class="token operator">:</span>
    <span class="token spread operator">...</span>
    ports<span class="token operator">:</span>
    <span class="token operator">-</span> <span class="token string">&quot;3000&quot;</span>                             # container <span class="token function">port</span> <span class="token punctuation">(</span><span class="token number">3000</span><span class="token punctuation">)</span><span class="token punctuation">,</span> assigned to random host port
    <span class="token operator">-</span> <span class="token string">&quot;3001-3005&quot;</span>                        # container port <span class="token function">range</span> <span class="token punctuation">(</span><span class="token number">3001</span><span class="token operator">-</span><span class="token number">3005</span><span class="token punctuation">)</span><span class="token punctuation">,</span> assigned to random host ports
    <span class="token operator">-</span> <span class="token string">&quot;8000:8000&quot;</span>                        # container <span class="token function">port</span> <span class="token punctuation">(</span><span class="token number">8000</span><span class="token punctuation">)</span><span class="token punctuation">,</span> assigned to given host <span class="token function">port</span> <span class="token punctuation">(</span><span class="token number">8000</span><span class="token punctuation">)</span>
    <span class="token operator">-</span> <span class="token string">&quot;9090-9091:8080-8081&quot;</span>              # container port <span class="token function">range</span> <span class="token punctuation">(</span><span class="token number">8080</span><span class="token operator">-</span><span class="token number">8081</span><span class="token punctuation">)</span><span class="token punctuation">,</span> assigned to given host port <span class="token function">range</span> <span class="token punctuation">(</span><span class="token number">9090</span><span class="token operator">-</span><span class="token number">9091</span><span class="token punctuation">)</span>
    <span class="token operator">-</span> <span class="token string">&quot;127.0.0.1:8002:8002&quot;</span>              # container <span class="token function">port</span> <span class="token punctuation">(</span><span class="token number">8002</span><span class="token punctuation">)</span><span class="token punctuation">,</span> assigned to given host <span class="token function">port</span> <span class="token punctuation">(</span><span class="token number">8002</span><span class="token punctuation">)</span> and bind to <span class="token number">127.0</span><span class="token number">.0</span><span class="token number">.1</span>
    <span class="token operator">-</span> <span class="token string">&quot;6060:6060/udp&quot;</span>                    # container <span class="token function">port</span> <span class="token punctuation">(</span><span class="token number">6060</span><span class="token punctuation">)</span> restricted to <span class="token constant">UDP</span> protocol<span class="token punctuation">,</span> assigned to given <span class="token function">host</span> <span class="token punctuation">(</span><span class="token number">6060</span><span class="token punctuation">)</span>
</code></pre>
<p>Como se ha presentado anteriormente, tambi칠n podemos publicar m칰ltiples puertos de contenedores a la vez, utilizando diferentes variantes de la sintaxis corta y configur치ndola de forma m치s precisa. Docker Compose expone todos los puertos de contenedor especificados, haci칠ndolos accesibles interna y externamente desde la m치quina local.</p>
<p>Como antes, vamos a comprobar los puertos expuestos con el comando docker ps:</p>
<pre class="language-js"><code class="language-js"><span class="token operator">&gt;</span> docker ps <span class="token operator">-</span>a
<span class="token constant">CONTAINER</span> <span class="token constant">ID</span>   <span class="token spread operator">...</span> <span class="token constant">PORTS</span>                                                                        <span class="token constant">NAMES</span>
e8c65b9eec91   <span class="token spread operator">...</span> <span class="token number">0.0</span><span class="token number">.0</span><span class="token number">.0</span><span class="token operator">:</span><span class="token number">51060</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token number">3000</span><span class="token operator">/</span>tcp<span class="token punctuation">,</span> <span class="token number">0.0</span><span class="token number">.0</span><span class="token number">.0</span><span class="token operator">:</span><span class="token number">51063</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token number">3001</span><span class="token operator">/</span>tcp<span class="token punctuation">,</span> <span class="token number">0.0</span><span class="token number">.0</span><span class="token number">.0</span><span class="token operator">:</span><span class="token number">51064</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token number">3002</span><span class="token operator">/</span>tcp<span class="token punctuation">,</span>   bael_myapp1
                   <span class="token number">0.0</span><span class="token number">.0</span><span class="token number">.0</span><span class="token operator">:</span><span class="token number">51065</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token number">3003</span><span class="token operator">/</span>tcp<span class="token punctuation">,</span> <span class="token number">0.0</span><span class="token number">.0</span><span class="token number">.0</span><span class="token operator">:</span><span class="token number">51061</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token number">3004</span><span class="token operator">/</span>tcp<span class="token punctuation">,</span> <span class="token number">0.0</span><span class="token number">.0</span><span class="token number">.0</span><span class="token operator">:</span><span class="token number">51062</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token number">3005</span><span class="token operator">/</span>tcp<span class="token punctuation">,</span> 
                   <span class="token number">0.0</span><span class="token number">.0</span><span class="token number">.0</span><span class="token operator">:</span><span class="token number">8000</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token number">8000</span><span class="token operator">/</span>tcp<span class="token punctuation">,</span> <span class="token number">0.0</span><span class="token number">.0</span><span class="token number">.0</span><span class="token operator">:</span><span class="token number">9090</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token number">8080</span><span class="token operator">/</span>tcp<span class="token punctuation">,</span> <span class="token number">0.0</span><span class="token number">.0</span><span class="token number">.0</span><span class="token operator">:</span><span class="token number">9091</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token number">8081</span><span class="token operator">/</span>tcp
                   <span class="token number">127.0</span><span class="token number">.0</span><span class="token number">.1</span><span class="token operator">:</span><span class="token number">8002</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token number">8002</span><span class="token operator">/</span>tcp<span class="token punctuation">,</span> <span class="token number">0.0</span><span class="token number">.0</span><span class="token number">.0</span><span class="token operator">:</span><span class="token number">6060</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token number">6060</span><span class="token operator">/</span>udp
</code></pre>
<p>Una vez m치s, en la columna PORTS, podemos encontrar todos los puertos expuestos. El valor a la izquierda de la flecha muestra la direcci칩n del host donde podemos alcanzar el contenedor externamente.</p>
<h3>Sintaxis larga</h3>
<p>Utilizando la sintaxis larga, podemos configurar los puertos de la misma manera. Sin embargo, en lugar de utilizar una cadena separada por dos puntos, definimos cada propiedad individualmente:</p>
<pre class="language-js"><code class="language-js">services<span class="token operator">:</span> 
  myapp1<span class="token operator">:</span>
  <span class="token spread operator">...</span>
  ports<span class="token operator">:</span>
  # <span class="token operator">-</span> <span class="token string">&quot;127.0.0.1:6060:6060/udp&quot;</span>
  <span class="token operator">-</span> target<span class="token operator">:</span> <span class="token number">6060</span>
    host_ip<span class="token operator">:</span> <span class="token number">127.0</span><span class="token number">.0</span><span class="token number">.1</span>
    published<span class="token operator">:</span> <span class="token number">6060</span>
    protocol<span class="token operator">:</span> udp
    mode<span class="token operator">:</span> host
</code></pre>
<p>Aqu칤, el target es obligatorio y especifica el puerto del contenedor (o rango de puertos) que ser치 expuesto, lo que equivale al CONTAINER en la sintaxis corta.</p>
<ul>
<li>El host_ip y published son partes de HOST en la corta, donde podemos definir la direcci칩n IP y el puerto del host.</li>
<li>El protocolo, igual que PROTOCOL en la sintaxis corta, restringe el puerto del contenedor al protocolo especificado (o TCP si est치 vac칤o).</li>
<li>El modo es el enum con dos valores que especifica las reglas de publicaci칩n del puerto. Debemos usar el valor host para publicar un puerto localmente. El segundo valor - ingress - est치 reservado para entornos de contenedores m치s complejos y significa que el puerto ser치 equilibrado en carga.</li>
</ul>
<p>En conclusi칩n, cualquier cadena de sintaxis corta puede ser f치cilmente representada por una estructura larga. Sin embargo, no todas las configuraciones de sintaxis larga pueden ser trasladadas a la corta debido a la falta de una propiedad de modo.</p>
<h1>Conclusi칩n</h1>
<p>En este art칤culo, acabamos de cubrir una parte de las configuraciones de red en el Docker Compose. Hemos analizado y comparado la configuraci칩n de puertos mediante las secciones expose y ports.</p>
<p>La secci칩n expose nos permite exponer puertos espec칤ficos de nuestro contenedor s칩lo a otros servicios en la misma red. Podemos hacerlo simplemente especificando los puertos del contenedor.</p>
<p>La secci칩n ports tambi칠n expone los puertos especificados de los contenedores. A diferencia de la anterior, los puertos se abren no s칩lo para otros servicios en la misma red sino tambi칠n para el host. La configuraci칩n es un poco m치s compleja, donde podemos configurar el puerto expuesto, la direcci칩n de enlace local y el protocolo restringido. Dependiendo de nuestras preferencias, podemos elegir entre dos sintaxis diferentes.</p></article></div><header class="sc-hKMtZM gGmpHf"><hr style="width:100%;margin-top:10px"/><div style="display:flex;flex-direction:row"><a style="margin:10px;display:flex;align-items:center" href="/"><span>home</span></a><a class="menu-item" style="margin:10px;display:flex;align-items:center" href="/proyectos"><span>proyectos</span></a><a class="menu-item" style="margin:10px;display:flex;align-items:center" href="/about"><span>about</span></a></div><p style="font-size:13px">made with 仇벒잺 춸 javierserna.com 2021</p></header></div></div><div id="modal-root"></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"source":{"compiledSource":"/*@jsxRuntime automatic @jsxImportSource react*/\nconst {Fragment: _Fragment, jsx: _jsx, jsxs: _jsxs} = arguments[0];\nconst {useMDXComponents: _provideComponents} = arguments[0];\nfunction _createMdxContent(props) {\n  const _components = Object.assign({\n    p: \"p\",\n    img: \"img\",\n    h2: \"h2\",\n    em: \"em\",\n    pre: \"pre\",\n    code: \"code\",\n    span: \"span\",\n    h3: \"h3\",\n    ul: \"ul\",\n    li: \"li\",\n    h1: \"h1\"\n  }, _provideComponents(), props.components);\n  return _jsxs(_Fragment, {\n    children: [_jsx(_components.p, {\n      children: _jsx(_components.img, {\n        src: \"https://avatars.githubusercontent.com/u/5429470?s=200\u0026v=4\",\n        alt: \"N|Solid\"\n      })\n    }), \"\\n\", _jsx(_components.h2, {\n      children: \"Resumen\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"Como sabemos, Docker Compose es una herramienta para definir y administrar m칰ltiples contenedores de una vez. Docker Compose establece una red dedicada para los contenedores que hemos definido, habilitando la comunicacion entre ellos.\\r\\nComo resultado, nosotros podemos crear y correr servicios con una configuracion en el archivo docker-compose.yml usando simplemente un 칰nico comando.\"\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"En este art칤culo veremos dos propiedades de YAML que nos permitir치n customizar nuestra red de los contenedores, con \", _jsx(_components.em, {\n        children: \"EXPOSE\"\n      }), \" y \", _jsx(_components.em, {\n        children: \"PORTS\"\n      }), \".\"]\n    }), \"\\n\", _jsx(_components.h2, {\n      children: \"Expose\"\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"Primeramente, echemos un ojo a la configuracion de \", _jsx(_components.em, {\n        children: \"expose\"\n      }), \". Esta propiedad define los puertos que Docker Compose expone desde el contenedor.\"]\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"Estos puertos ser치n accesibles desde otros servicios conectados a la misma red (\", _jsx(_components.em, {\n        children: \"network\"\n      }), \"), pero no ser치n publicados en el ordenador o la m치quina que proporciona el host.\"]\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"Podemos exponer el puerto especificando su n칰mero en la secci칩n de \", _jsx(_components.em, {\n        children: \"services\"\n      }), \".\"]\n    }), \"\\n\", _jsx(_components.pre, {\n      className: \"language-shell\",\n      children: _jsxs(_components.code, {\n        className: \"language-shell\",\n        children: [\"services:\\r\\n  myapp1:\\r\\n    \", _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \"..\"\n        }), \".\\r\\n    expose:\\r\\n      - \", _jsx(_components.span, {\n          className: \"token string\",\n          children: \"\\\"3000\\\"\"\n        }), \"\\r\\n      - \", _jsx(_components.span, {\n          className: \"token string\",\n          children: \"\\\"8000\\\"\"\n        }), \"\\r\\n  myapp2:\\r\\n    \", _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \"..\"\n        }), \".\\r\\n    expose:\\r\\n      - \", _jsx(_components.span, {\n          className: \"token string\",\n          children: \"\\\"5000\\\"\"\n        }), \"\\n\"]\n      })\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"Como podemos ver, podemos especificar m칰ltiples valores para cada servicio. En este caso, hemos expuesto los puertos 3000 y 8000 para el contendor \", _jsx(_components.em, {\n        children: \"myapp1\"\n      }), \"  y para el contendor \", _jsx(_components.em, {\n        children: \"myapp2\"\n      }), \" el puerto 5000. Los servicios ahora son accesibles desde estos puertos por otros contenedores en la misma red (\", _jsx(_components.em, {\n        children: \"network\"\n      }), \").\\r\\nEchemos un ojo a los puertos expuestos.\"]\n    }), \"\\n\", _jsx(_components.pre, {\n      className: \"language-js\",\n      children: _jsxs(_components.code, {\n        className: \"language-js\",\n        children: [_jsx(_components.span, {\n          className: \"token operator\",\n          children: \"\u003e\"\n        }), \" docker ps\\r\\n\", _jsx(_components.span, {\n          className: \"token constant\",\n          children: \"CONTAINER\"\n        }), \" \", _jsx(_components.span, {\n          className: \"token constant\",\n          children: \"ID\"\n        }), \"   \", _jsx(_components.span, {\n          className: \"token constant\",\n          children: \"IMAGE\"\n        }), \"    \", _jsx(_components.span, {\n          className: \"token constant\",\n          children: \"COMMAND\"\n        }), \"     \", _jsx(_components.span, {\n          className: \"token constant\",\n          children: \"CREATED\"\n        }), \"     \", _jsx(_components.span, {\n          className: \"token constant\",\n          children: \"STATUS\"\n        }), \"      \", _jsx(_components.span, {\n          className: \"token constant\",\n          children: \"PORTS\"\n        }), \"               \", _jsx(_components.span, {\n          className: \"token constant\",\n          children: \"NAMES\"\n        }), \"\\r\\n\", _jsx(_components.span, {\n          className: \"token number\",\n          children: \"8673\"\n        }), \"c14f18d1   \", _jsx(_components.span, {\n          className: \"token spread operator\",\n          children: \"...\"\n        }), \"      \", _jsx(_components.span, {\n          className: \"token spread operator\",\n          children: \"...\"\n        }), \"         \", _jsx(_components.span, {\n          className: \"token spread operator\",\n          children: \"...\"\n        }), \"         \", _jsx(_components.span, {\n          className: \"token spread operator\",\n          children: \"...\"\n        }), \"         \", _jsx(_components.span, {\n          className: \"token number\",\n          children: \"3000\"\n        }), _jsx(_components.span, {\n          className: \"token operator\",\n          children: \"/\"\n        }), \"tcp\", _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \",\"\n        }), \" \", _jsx(_components.span, {\n          className: \"token number\",\n          children: \"8000\"\n        }), _jsx(_components.span, {\n          className: \"token operator\",\n          children: \"/\"\n        }), \"tcp  bael_myapp1\\r\\nbc044e180131   \", _jsx(_components.span, {\n          className: \"token spread operator\",\n          children: \"...\"\n        }), \"      \", _jsx(_components.span, {\n          className: \"token spread operator\",\n          children: \"...\"\n        }), \"         \", _jsx(_components.span, {\n          className: \"token spread operator\",\n          children: \"...\"\n        }), \"         \", _jsx(_components.span, {\n          className: \"token spread operator\",\n          children: \"...\"\n        }), \"         \", _jsx(_components.span, {\n          className: \"token number\",\n          children: \"5000\"\n        }), _jsx(_components.span, {\n          className: \"token operator\",\n          children: \"/\"\n        }), \"tcp            bael_myapp2\\n\"]\n      })\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"En la salida del comando \", _jsx(_components.em, {\n        children: \"docker\"\n      }), \".ps*, podemos encontrar los puertos que estan expuestos en la columna PORTS.\\r\\nFinalmente, verifiquemos la comunicaci칩n entre los contenedores con el siguiente comando.\"]\n    }), \"\\n\", _jsx(_components.pre, {\n      className: \"language-js\",\n      children: _jsxs(_components.code, {\n        className: \"language-js\",\n        children: [_jsx(_components.span, {\n          className: \"token operator\",\n          children: \"\u003e\"\n        }), \" docker exec \", _jsx(_components.span, {\n          className: \"token operator\",\n          children: \"-\"\n        }), \"it bc044e180131 \", _jsx(_components.span, {\n          className: \"token operator\",\n          children: \"/\"\n        }), \"bin\", _jsx(_components.span, {\n          className: \"token operator\",\n          children: \"/\"\n        }), \"bash\\r\\n\\r\\nbash\", _jsx(_components.span, {\n          className: \"token operator\",\n          children: \"-\"\n        }), _jsx(_components.span, {\n          className: \"token number\",\n          children: \"5.1\"\n        }), \"$ nc \", _jsx(_components.span, {\n          className: \"token operator\",\n          children: \"-\"\n        }), \"vz myapp1 \", _jsx(_components.span, {\n          className: \"token number\",\n          children: \"3000\"\n        }), \"\\r\\n\", _jsx(_components.span, {\n          className: \"token function\",\n          children: \"myapp1\"\n        }), \" \", _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \"(\"\n        }), _jsx(_components.span, {\n          className: \"token number\",\n          children: \"172.18\"\n        }), _jsx(_components.span, {\n          className: \"token number\",\n          children: \".0\"\n        }), _jsx(_components.span, {\n          className: \"token number\",\n          children: \".1\"\n        }), _jsx(_components.span, {\n          className: \"token operator\",\n          children: \":\"\n        }), _jsx(_components.span, {\n          className: \"token number\",\n          children: \"3000\"\n        }), _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \")\"\n        }), \" open\\r\\nbash\", _jsx(_components.span, {\n          className: \"token operator\",\n          children: \"-\"\n        }), _jsx(_components.span, {\n          className: \"token number\",\n          children: \"5.1\"\n        }), \"$ nc \", _jsx(_components.span, {\n          className: \"token operator\",\n          children: \"-\"\n        }), \"vz myapp1 \", _jsx(_components.span, {\n          className: \"token number\",\n          children: \"8000\"\n        }), \"\\r\\n\", _jsx(_components.span, {\n          className: \"token function\",\n          children: \"myapp1\"\n        }), \" \", _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \"(\"\n        }), _jsx(_components.span, {\n          className: \"token number\",\n          children: \"172.18\"\n        }), _jsx(_components.span, {\n          className: \"token number\",\n          children: \".0\"\n        }), _jsx(_components.span, {\n          className: \"token number\",\n          children: \".1\"\n        }), _jsx(_components.span, {\n          className: \"token operator\",\n          children: \":\"\n        }), _jsx(_components.span, {\n          className: \"token number\",\n          children: \"8000\"\n        }), _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \")\"\n        }), \" open\\n\"]\n      })\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"Acabamos de conectarnos a la CLI de \", _jsx(_components.em, {\n        children: \"myapp2\"\n      }), \" usando el comando \", _jsx(_components.em, {\n        children: \"netcat\"\n      }), \", comprobamos que los dos puertos expuestos desde myapp1 estan comunicados.\"]\n    }), \"\\n\", _jsx(_components.h2, {\n      children: \"PORTS\"\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"Ahora, echemos un ojo a PORTS. Como la propiedad de antes, esta propiedad define los puertos que queremos que esten expuestos desde el contenedor. A diferencia de la configuracion de EXPOSE, la configuracion de PORTS permite que estos puertos que especifiquemos sean accesibles internamente y publicados en la \", _jsx(_components.em, {\n        children: \"maquina host\"\n      }), \" o el ordenador.\"]\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"Como antes, podemos definir los puertos de cada servicio, pero la configuracion es un poco mas compleja. Primero, tenemos que elegir dos sintaxis, la corta o la larga, para definir la configuracion.\"\n    }), \"\\n\", _jsx(_components.h3, {\n      children: \"Sintaxis Corta\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"Empezemos analizando la corta, La corta esta separada por dos puntos para establecer la direcci칩n IP del HOST, el puerto del HOST y el puerto del contenedor.\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"Definamos los puertos en el archivo Docker Compose.\"\n    }), \"\\n\", _jsx(_components.pre, {\n      className: \"language-js\",\n      children: _jsxs(_components.code, {\n        className: \"language-js\",\n        children: [_jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \"[\"\n        }), _jsx(_components.span, {\n          className: \"token constant\",\n          children: \"HOST\"\n        }), _jsx(_components.span, {\n          className: \"token operator\",\n          children: \":\"\n        }), _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \"]\"\n        }), _jsx(_components.span, {\n          className: \"token constant\",\n          children: \"CONTENDOR\"\n        }), _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \"[\"\n        }), _jsx(_components.span, {\n          className: \"token operator\",\n          children: \"/\"\n        }), _jsx(_components.span, {\n          className: \"token constant\",\n          children: \"PROTOCOL\"\n        }), _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \"]\"\n        }), \"\\n\"]\n      })\n    }), \"\\n\", _jsxs(_components.ul, {\n      children: [\"\\n\", _jsx(_components.li, {\n        children: \"Aqu칤 el HOST es un n칰mero de puerto de host o un rango de n칰meros de puerto que puede ir precedido de una direcci칩n IP. Si no especificamos la direcci칩n IP, Docker Compose vincula el puerto a todas las interfaces de red\"\n      }), \"\\n\", _jsx(_components.li, {\n        children: \"El CONTENEDOR define un n칰mero de puerto del contenedor o un rango de n칰meros de puerto.\"\n      }), \"\\n\", _jsx(_components.li, {\n        children: \"El PROTOCOL restringe los puertos de los contenedores al protocolo especificado o los establece como TCP si est치n vac칤os. S칩lo la parte de CONTAINER es obligatoria.\"\n      }), \"\\n\"]\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"Ahora que conocemos la sintaxis, vamos a definir los puertos en nuestro archivo Docker Compose:\"\n    }), \"\\n\", _jsx(_components.pre, {\n      className: \"language-js\",\n      children: _jsxs(_components.code, {\n        className: \"language-js\",\n        children: [\"services\", _jsx(_components.span, {\n          className: \"token operator\",\n          children: \":\"\n        }), \"\\r\\n  myapp1\", _jsx(_components.span, {\n          className: \"token operator\",\n          children: \":\"\n        }), \"\\r\\n    \", _jsx(_components.span, {\n          className: \"token spread operator\",\n          children: \"...\"\n        }), \"\\r\\n    ports\", _jsx(_components.span, {\n          className: \"token operator\",\n          children: \":\"\n        }), \"\\r\\n    \", _jsx(_components.span, {\n          className: \"token operator\",\n          children: \"-\"\n        }), \" \", _jsx(_components.span, {\n          className: \"token string\",\n          children: \"\\\"3000\\\"\"\n        }), \"                             # container \", _jsx(_components.span, {\n          className: \"token function\",\n          children: \"port\"\n        }), \" \", _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \"(\"\n        }), _jsx(_components.span, {\n          className: \"token number\",\n          children: \"3000\"\n        }), _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \")\"\n        }), _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \",\"\n        }), \" assigned to random host port\\r\\n    \", _jsx(_components.span, {\n          className: \"token operator\",\n          children: \"-\"\n        }), \" \", _jsx(_components.span, {\n          className: \"token string\",\n          children: \"\\\"3001-3005\\\"\"\n        }), \"                        # container port \", _jsx(_components.span, {\n          className: \"token function\",\n          children: \"range\"\n        }), \" \", _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \"(\"\n        }), _jsx(_components.span, {\n          className: \"token number\",\n          children: \"3001\"\n        }), _jsx(_components.span, {\n          className: \"token operator\",\n          children: \"-\"\n        }), _jsx(_components.span, {\n          className: \"token number\",\n          children: \"3005\"\n        }), _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \")\"\n        }), _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \",\"\n        }), \" assigned to random host ports\\r\\n    \", _jsx(_components.span, {\n          className: \"token operator\",\n          children: \"-\"\n        }), \" \", _jsx(_components.span, {\n          className: \"token string\",\n          children: \"\\\"8000:8000\\\"\"\n        }), \"                        # container \", _jsx(_components.span, {\n          className: \"token function\",\n          children: \"port\"\n        }), \" \", _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \"(\"\n        }), _jsx(_components.span, {\n          className: \"token number\",\n          children: \"8000\"\n        }), _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \")\"\n        }), _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \",\"\n        }), \" assigned to given host \", _jsx(_components.span, {\n          className: \"token function\",\n          children: \"port\"\n        }), \" \", _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \"(\"\n        }), _jsx(_components.span, {\n          className: \"token number\",\n          children: \"8000\"\n        }), _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \")\"\n        }), \"\\r\\n    \", _jsx(_components.span, {\n          className: \"token operator\",\n          children: \"-\"\n        }), \" \", _jsx(_components.span, {\n          className: \"token string\",\n          children: \"\\\"9090-9091:8080-8081\\\"\"\n        }), \"              # container port \", _jsx(_components.span, {\n          className: \"token function\",\n          children: \"range\"\n        }), \" \", _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \"(\"\n        }), _jsx(_components.span, {\n          className: \"token number\",\n          children: \"8080\"\n        }), _jsx(_components.span, {\n          className: \"token operator\",\n          children: \"-\"\n        }), _jsx(_components.span, {\n          className: \"token number\",\n          children: \"8081\"\n        }), _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \")\"\n        }), _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \",\"\n        }), \" assigned to given host port \", _jsx(_components.span, {\n          className: \"token function\",\n          children: \"range\"\n        }), \" \", _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \"(\"\n        }), _jsx(_components.span, {\n          className: \"token number\",\n          children: \"9090\"\n        }), _jsx(_components.span, {\n          className: \"token operator\",\n          children: \"-\"\n        }), _jsx(_components.span, {\n          className: \"token number\",\n          children: \"9091\"\n        }), _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \")\"\n        }), \"\\r\\n    \", _jsx(_components.span, {\n          className: \"token operator\",\n          children: \"-\"\n        }), \" \", _jsx(_components.span, {\n          className: \"token string\",\n          children: \"\\\"127.0.0.1:8002:8002\\\"\"\n        }), \"              # container \", _jsx(_components.span, {\n          className: \"token function\",\n          children: \"port\"\n        }), \" \", _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \"(\"\n        }), _jsx(_components.span, {\n          className: \"token number\",\n          children: \"8002\"\n        }), _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \")\"\n        }), _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \",\"\n        }), \" assigned to given host \", _jsx(_components.span, {\n          className: \"token function\",\n          children: \"port\"\n        }), \" \", _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \"(\"\n        }), _jsx(_components.span, {\n          className: \"token number\",\n          children: \"8002\"\n        }), _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \")\"\n        }), \" and bind to \", _jsx(_components.span, {\n          className: \"token number\",\n          children: \"127.0\"\n        }), _jsx(_components.span, {\n          className: \"token number\",\n          children: \".0\"\n        }), _jsx(_components.span, {\n          className: \"token number\",\n          children: \".1\"\n        }), \"\\r\\n    \", _jsx(_components.span, {\n          className: \"token operator\",\n          children: \"-\"\n        }), \" \", _jsx(_components.span, {\n          className: \"token string\",\n          children: \"\\\"6060:6060/udp\\\"\"\n        }), \"                    # container \", _jsx(_components.span, {\n          className: \"token function\",\n          children: \"port\"\n        }), \" \", _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \"(\"\n        }), _jsx(_components.span, {\n          className: \"token number\",\n          children: \"6060\"\n        }), _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \")\"\n        }), \" restricted to \", _jsx(_components.span, {\n          className: \"token constant\",\n          children: \"UDP\"\n        }), \" protocol\", _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \",\"\n        }), \" assigned to given \", _jsx(_components.span, {\n          className: \"token function\",\n          children: \"host\"\n        }), \" \", _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \"(\"\n        }), _jsx(_components.span, {\n          className: \"token number\",\n          children: \"6060\"\n        }), _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \")\"\n        }), \"\\n\"]\n      })\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"Como se ha presentado anteriormente, tambi칠n podemos publicar m칰ltiples puertos de contenedores a la vez, utilizando diferentes variantes de la sintaxis corta y configur치ndola de forma m치s precisa. Docker Compose expone todos los puertos de contenedor especificados, haci칠ndolos accesibles interna y externamente desde la m치quina local.\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"Como antes, vamos a comprobar los puertos expuestos con el comando docker ps:\"\n    }), \"\\n\", _jsx(_components.pre, {\n      className: \"language-js\",\n      children: _jsxs(_components.code, {\n        className: \"language-js\",\n        children: [_jsx(_components.span, {\n          className: \"token operator\",\n          children: \"\u003e\"\n        }), \" docker ps \", _jsx(_components.span, {\n          className: \"token operator\",\n          children: \"-\"\n        }), \"a\\r\\n\", _jsx(_components.span, {\n          className: \"token constant\",\n          children: \"CONTAINER\"\n        }), \" \", _jsx(_components.span, {\n          className: \"token constant\",\n          children: \"ID\"\n        }), \"   \", _jsx(_components.span, {\n          className: \"token spread operator\",\n          children: \"...\"\n        }), \" \", _jsx(_components.span, {\n          className: \"token constant\",\n          children: \"PORTS\"\n        }), \"                                                                        \", _jsx(_components.span, {\n          className: \"token constant\",\n          children: \"NAMES\"\n        }), \"\\r\\ne8c65b9eec91   \", _jsx(_components.span, {\n          className: \"token spread operator\",\n          children: \"...\"\n        }), \" \", _jsx(_components.span, {\n          className: \"token number\",\n          children: \"0.0\"\n        }), _jsx(_components.span, {\n          className: \"token number\",\n          children: \".0\"\n        }), _jsx(_components.span, {\n          className: \"token number\",\n          children: \".0\"\n        }), _jsx(_components.span, {\n          className: \"token operator\",\n          children: \":\"\n        }), _jsx(_components.span, {\n          className: \"token number\",\n          children: \"51060\"\n        }), _jsx(_components.span, {\n          className: \"token operator\",\n          children: \"-\"\n        }), _jsx(_components.span, {\n          className: \"token operator\",\n          children: \"\u003e\"\n        }), _jsx(_components.span, {\n          className: \"token number\",\n          children: \"3000\"\n        }), _jsx(_components.span, {\n          className: \"token operator\",\n          children: \"/\"\n        }), \"tcp\", _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \",\"\n        }), \" \", _jsx(_components.span, {\n          className: \"token number\",\n          children: \"0.0\"\n        }), _jsx(_components.span, {\n          className: \"token number\",\n          children: \".0\"\n        }), _jsx(_components.span, {\n          className: \"token number\",\n          children: \".0\"\n        }), _jsx(_components.span, {\n          className: \"token operator\",\n          children: \":\"\n        }), _jsx(_components.span, {\n          className: \"token number\",\n          children: \"51063\"\n        }), _jsx(_components.span, {\n          className: \"token operator\",\n          children: \"-\"\n        }), _jsx(_components.span, {\n          className: \"token operator\",\n          children: \"\u003e\"\n        }), _jsx(_components.span, {\n          className: \"token number\",\n          children: \"3001\"\n        }), _jsx(_components.span, {\n          className: \"token operator\",\n          children: \"/\"\n        }), \"tcp\", _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \",\"\n        }), \" \", _jsx(_components.span, {\n          className: \"token number\",\n          children: \"0.0\"\n        }), _jsx(_components.span, {\n          className: \"token number\",\n          children: \".0\"\n        }), _jsx(_components.span, {\n          className: \"token number\",\n          children: \".0\"\n        }), _jsx(_components.span, {\n          className: \"token operator\",\n          children: \":\"\n        }), _jsx(_components.span, {\n          className: \"token number\",\n          children: \"51064\"\n        }), _jsx(_components.span, {\n          className: \"token operator\",\n          children: \"-\"\n        }), _jsx(_components.span, {\n          className: \"token operator\",\n          children: \"\u003e\"\n        }), _jsx(_components.span, {\n          className: \"token number\",\n          children: \"3002\"\n        }), _jsx(_components.span, {\n          className: \"token operator\",\n          children: \"/\"\n        }), \"tcp\", _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \",\"\n        }), \"   bael_myapp1\\r\\n                   \", _jsx(_components.span, {\n          className: \"token number\",\n          children: \"0.0\"\n        }), _jsx(_components.span, {\n          className: \"token number\",\n          children: \".0\"\n        }), _jsx(_components.span, {\n          className: \"token number\",\n          children: \".0\"\n        }), _jsx(_components.span, {\n          className: \"token operator\",\n          children: \":\"\n        }), _jsx(_components.span, {\n          className: \"token number\",\n          children: \"51065\"\n        }), _jsx(_components.span, {\n          className: \"token operator\",\n          children: \"-\"\n        }), _jsx(_components.span, {\n          className: \"token operator\",\n          children: \"\u003e\"\n        }), _jsx(_components.span, {\n          className: \"token number\",\n          children: \"3003\"\n        }), _jsx(_components.span, {\n          className: \"token operator\",\n          children: \"/\"\n        }), \"tcp\", _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \",\"\n        }), \" \", _jsx(_components.span, {\n          className: \"token number\",\n          children: \"0.0\"\n        }), _jsx(_components.span, {\n          className: \"token number\",\n          children: \".0\"\n        }), _jsx(_components.span, {\n          className: \"token number\",\n          children: \".0\"\n        }), _jsx(_components.span, {\n          className: \"token operator\",\n          children: \":\"\n        }), _jsx(_components.span, {\n          className: \"token number\",\n          children: \"51061\"\n        }), _jsx(_components.span, {\n          className: \"token operator\",\n          children: \"-\"\n        }), _jsx(_components.span, {\n          className: \"token operator\",\n          children: \"\u003e\"\n        }), _jsx(_components.span, {\n          className: \"token number\",\n          children: \"3004\"\n        }), _jsx(_components.span, {\n          className: \"token operator\",\n          children: \"/\"\n        }), \"tcp\", _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \",\"\n        }), \" \", _jsx(_components.span, {\n          className: \"token number\",\n          children: \"0.0\"\n        }), _jsx(_components.span, {\n          className: \"token number\",\n          children: \".0\"\n        }), _jsx(_components.span, {\n          className: \"token number\",\n          children: \".0\"\n        }), _jsx(_components.span, {\n          className: \"token operator\",\n          children: \":\"\n        }), _jsx(_components.span, {\n          className: \"token number\",\n          children: \"51062\"\n        }), _jsx(_components.span, {\n          className: \"token operator\",\n          children: \"-\"\n        }), _jsx(_components.span, {\n          className: \"token operator\",\n          children: \"\u003e\"\n        }), _jsx(_components.span, {\n          className: \"token number\",\n          children: \"3005\"\n        }), _jsx(_components.span, {\n          className: \"token operator\",\n          children: \"/\"\n        }), \"tcp\", _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \",\"\n        }), \" \\r\\n                   \", _jsx(_components.span, {\n          className: \"token number\",\n          children: \"0.0\"\n        }), _jsx(_components.span, {\n          className: \"token number\",\n          children: \".0\"\n        }), _jsx(_components.span, {\n          className: \"token number\",\n          children: \".0\"\n        }), _jsx(_components.span, {\n          className: \"token operator\",\n          children: \":\"\n        }), _jsx(_components.span, {\n          className: \"token number\",\n          children: \"8000\"\n        }), _jsx(_components.span, {\n          className: \"token operator\",\n          children: \"-\"\n        }), _jsx(_components.span, {\n          className: \"token operator\",\n          children: \"\u003e\"\n        }), _jsx(_components.span, {\n          className: \"token number\",\n          children: \"8000\"\n        }), _jsx(_components.span, {\n          className: \"token operator\",\n          children: \"/\"\n        }), \"tcp\", _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \",\"\n        }), \" \", _jsx(_components.span, {\n          className: \"token number\",\n          children: \"0.0\"\n        }), _jsx(_components.span, {\n          className: \"token number\",\n          children: \".0\"\n        }), _jsx(_components.span, {\n          className: \"token number\",\n          children: \".0\"\n        }), _jsx(_components.span, {\n          className: \"token operator\",\n          children: \":\"\n        }), _jsx(_components.span, {\n          className: \"token number\",\n          children: \"9090\"\n        }), _jsx(_components.span, {\n          className: \"token operator\",\n          children: \"-\"\n        }), _jsx(_components.span, {\n          className: \"token operator\",\n          children: \"\u003e\"\n        }), _jsx(_components.span, {\n          className: \"token number\",\n          children: \"8080\"\n        }), _jsx(_components.span, {\n          className: \"token operator\",\n          children: \"/\"\n        }), \"tcp\", _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \",\"\n        }), \" \", _jsx(_components.span, {\n          className: \"token number\",\n          children: \"0.0\"\n        }), _jsx(_components.span, {\n          className: \"token number\",\n          children: \".0\"\n        }), _jsx(_components.span, {\n          className: \"token number\",\n          children: \".0\"\n        }), _jsx(_components.span, {\n          className: \"token operator\",\n          children: \":\"\n        }), _jsx(_components.span, {\n          className: \"token number\",\n          children: \"9091\"\n        }), _jsx(_components.span, {\n          className: \"token operator\",\n          children: \"-\"\n        }), _jsx(_components.span, {\n          className: \"token operator\",\n          children: \"\u003e\"\n        }), _jsx(_components.span, {\n          className: \"token number\",\n          children: \"8081\"\n        }), _jsx(_components.span, {\n          className: \"token operator\",\n          children: \"/\"\n        }), \"tcp\\r\\n                   \", _jsx(_components.span, {\n          className: \"token number\",\n          children: \"127.0\"\n        }), _jsx(_components.span, {\n          className: \"token number\",\n          children: \".0\"\n        }), _jsx(_components.span, {\n          className: \"token number\",\n          children: \".1\"\n        }), _jsx(_components.span, {\n          className: \"token operator\",\n          children: \":\"\n        }), _jsx(_components.span, {\n          className: \"token number\",\n          children: \"8002\"\n        }), _jsx(_components.span, {\n          className: \"token operator\",\n          children: \"-\"\n        }), _jsx(_components.span, {\n          className: \"token operator\",\n          children: \"\u003e\"\n        }), _jsx(_components.span, {\n          className: \"token number\",\n          children: \"8002\"\n        }), _jsx(_components.span, {\n          className: \"token operator\",\n          children: \"/\"\n        }), \"tcp\", _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \",\"\n        }), \" \", _jsx(_components.span, {\n          className: \"token number\",\n          children: \"0.0\"\n        }), _jsx(_components.span, {\n          className: \"token number\",\n          children: \".0\"\n        }), _jsx(_components.span, {\n          className: \"token number\",\n          children: \".0\"\n        }), _jsx(_components.span, {\n          className: \"token operator\",\n          children: \":\"\n        }), _jsx(_components.span, {\n          className: \"token number\",\n          children: \"6060\"\n        }), _jsx(_components.span, {\n          className: \"token operator\",\n          children: \"-\"\n        }), _jsx(_components.span, {\n          className: \"token operator\",\n          children: \"\u003e\"\n        }), _jsx(_components.span, {\n          className: \"token number\",\n          children: \"6060\"\n        }), _jsx(_components.span, {\n          className: \"token operator\",\n          children: \"/\"\n        }), \"udp\\n\"]\n      })\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"Una vez m치s, en la columna PORTS, podemos encontrar todos los puertos expuestos. El valor a la izquierda de la flecha muestra la direcci칩n del host donde podemos alcanzar el contenedor externamente.\"\n    }), \"\\n\", _jsx(_components.h3, {\n      children: \"Sintaxis larga\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"Utilizando la sintaxis larga, podemos configurar los puertos de la misma manera. Sin embargo, en lugar de utilizar una cadena separada por dos puntos, definimos cada propiedad individualmente:\"\n    }), \"\\n\", _jsx(_components.pre, {\n      className: \"language-js\",\n      children: _jsxs(_components.code, {\n        className: \"language-js\",\n        children: [\"services\", _jsx(_components.span, {\n          className: \"token operator\",\n          children: \":\"\n        }), \" \\r\\n  myapp1\", _jsx(_components.span, {\n          className: \"token operator\",\n          children: \":\"\n        }), \"\\r\\n  \", _jsx(_components.span, {\n          className: \"token spread operator\",\n          children: \"...\"\n        }), \"\\r\\n  ports\", _jsx(_components.span, {\n          className: \"token operator\",\n          children: \":\"\n        }), \"\\r\\n  # \", _jsx(_components.span, {\n          className: \"token operator\",\n          children: \"-\"\n        }), \" \", _jsx(_components.span, {\n          className: \"token string\",\n          children: \"\\\"127.0.0.1:6060:6060/udp\\\"\"\n        }), \"\\r\\n  \", _jsx(_components.span, {\n          className: \"token operator\",\n          children: \"-\"\n        }), \" target\", _jsx(_components.span, {\n          className: \"token operator\",\n          children: \":\"\n        }), \" \", _jsx(_components.span, {\n          className: \"token number\",\n          children: \"6060\"\n        }), \"\\r\\n    host_ip\", _jsx(_components.span, {\n          className: \"token operator\",\n          children: \":\"\n        }), \" \", _jsx(_components.span, {\n          className: \"token number\",\n          children: \"127.0\"\n        }), _jsx(_components.span, {\n          className: \"token number\",\n          children: \".0\"\n        }), _jsx(_components.span, {\n          className: \"token number\",\n          children: \".1\"\n        }), \"\\r\\n    published\", _jsx(_components.span, {\n          className: \"token operator\",\n          children: \":\"\n        }), \" \", _jsx(_components.span, {\n          className: \"token number\",\n          children: \"6060\"\n        }), \"\\r\\n    protocol\", _jsx(_components.span, {\n          className: \"token operator\",\n          children: \":\"\n        }), \" udp\\r\\n    mode\", _jsx(_components.span, {\n          className: \"token operator\",\n          children: \":\"\n        }), \" host\\n\"]\n      })\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"Aqu칤, el target es obligatorio y especifica el puerto del contenedor (o rango de puertos) que ser치 expuesto, lo que equivale al CONTAINER en la sintaxis corta.\"\n    }), \"\\n\", _jsxs(_components.ul, {\n      children: [\"\\n\", _jsx(_components.li, {\n        children: \"El host_ip y published son partes de HOST en la corta, donde podemos definir la direcci칩n IP y el puerto del host.\"\n      }), \"\\n\", _jsx(_components.li, {\n        children: \"El protocolo, igual que PROTOCOL en la sintaxis corta, restringe el puerto del contenedor al protocolo especificado (o TCP si est치 vac칤o).\"\n      }), \"\\n\", _jsx(_components.li, {\n        children: \"El modo es el enum con dos valores que especifica las reglas de publicaci칩n del puerto. Debemos usar el valor host para publicar un puerto localmente. El segundo valor - ingress - est치 reservado para entornos de contenedores m치s complejos y significa que el puerto ser치 equilibrado en carga.\"\n      }), \"\\n\"]\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"En conclusi칩n, cualquier cadena de sintaxis corta puede ser f치cilmente representada por una estructura larga. Sin embargo, no todas las configuraciones de sintaxis larga pueden ser trasladadas a la corta debido a la falta de una propiedad de modo.\"\n    }), \"\\n\", _jsx(_components.h1, {\n      children: \"Conclusi칩n\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"En este art칤culo, acabamos de cubrir una parte de las configuraciones de red en el Docker Compose. Hemos analizado y comparado la configuraci칩n de puertos mediante las secciones expose y ports.\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"La secci칩n expose nos permite exponer puertos espec칤ficos de nuestro contenedor s칩lo a otros servicios en la misma red. Podemos hacerlo simplemente especificando los puertos del contenedor.\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"La secci칩n ports tambi칠n expone los puertos especificados de los contenedores. A diferencia de la anterior, los puertos se abren no s칩lo para otros servicios en la misma red sino tambi칠n para el host. La configuraci칩n es un poco m치s compleja, donde podemos configurar el puerto expuesto, la direcci칩n de enlace local y el protocolo restringido. Dependiendo de nuestras preferencias, podemos elegir entre dos sintaxis diferentes.\"\n    })]\n  });\n}\nfunction MDXContent(props = {}) {\n  const {wrapper: MDXLayout} = Object.assign({}, _provideComponents(), props.components);\n  return MDXLayout ? _jsx(MDXLayout, Object.assign({}, props, {\n    children: _jsx(_createMdxContent, props)\n  })) : _createMdxContent(props);\n}\nreturn {\n  default: MDXContent\n};\n","frontmatter":{},"scope":{}},"frontmatter":{"slug":"diferencia-entre-export-ports-dockercompose","title":"游낾 Diferencia entre Expose y Ports en Docker Compose","date":"游딉勇뀱ulio 10, 2022","tags":"游눹Informatica","fecha":"2022-07-10","descripcion":"Encuentra las diferencias en Docker entre Expose y Ports."}},"__N_SSG":true},"page":"/[slug]","query":{"slug":"diferencia-entre-export-ports-dockercompose"},"buildId":"2yOrpd8KCKtPdgy_pAFqA","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>